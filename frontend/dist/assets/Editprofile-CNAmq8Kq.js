import{u as M}from"./index-kI_rcZ0B.js";import{d as N,g as S,s as k}from"./api-Xp8SCp5f.js";import{r as A}from"./index-BtR1NTjQ.js";import{m as B,a as f,Z as L,d as q,ah as s,p as E,M as O,O as t,U as l,u as b,t as r,S as J}from"./vue-DRvwLzXx.js";import"./base-BDaasHXh.js";import"./crypto-BjADBdty.js";const R=r("div",null,"限最多五张",-1),T=["src"],Z=r("br",null,null,-1),z=r("br",null,null,-1),D=r("br",null,null,-1),$=B({__name:"Editprofile",setup(F){const u=M();document.title="编辑个人信息";const i=f([{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"plant-1.png",url:"/static/img/讲座.png"},{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]),_=f(""),m=f(!1),p=u.id,V=async a=>{let e=await N({filename:a.name});console.log(e)},v=a=>{_.value=a.url,m.value=!0},w=a=>{console.log(a)},o=L({name:"",region:"",gender:"",desc:""});q(async()=>{let a=await S({userid:p});o.name=a.name,o.region=a.location,o.gender=a.gender,o.desc=a.desc,i.value.length=0,console.log(a.profiles),a.profiles.forEach(e=>{e.url=u.iframeurl+"/"+e.url,i.value.push(e)})});const P=async()=>{console.log(o);let a={info:JSON.stringify(o)},e=await k(a);console.log(e),A.push("/user/profile/"+p)};return(a,e)=>{const c=s("el-input"),d=s("el-form-item"),g=s("el-radio"),h=s("el-radio-group"),y=s("upload-filled"),x=s("el-icon"),U=s("el-upload"),j=s("el-dialog"),C=s("el-button"),I=s("el-form");return E(),O(I,{model:o,"label-width":"120px"},{default:t(()=>[l(d,{label:"名字"},{default:t(()=>[l(c,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.name=n)},null,8,["modelValue"])]),_:1}),l(d,{label:"性别"},{default:t(()=>[l(h,{modelValue:o.gender,"onUpdate:modelValue":e[1]||(e[1]=n=>o.gender=n)},{default:t(()=>[l(g,{label:"男"}),l(g,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"居住地"},{default:t(()=>[l(c,{modelValue:o.region,"onUpdate:modelValue":e[2]||(e[2]=n=>o.region=n)},null,8,["modelValue"])]),_:1}),l(d,{label:"相册"},{default:t(()=>[R]),_:1}),l(d,{label:""},{default:t(()=>[l(U,{"file-list":i.value,"onUpdate:fileList":e[3]||(e[3]=n=>i.value=n),action:b(u).iframeurl+"/api/users/save_profile","list-type":"picture-card",drag:"",data:{id:b(p)},"on-preview":v,"on-remove":V,"on-change":w,limit:5},{default:t(()=>[l(x,{class:"el-icon--upload"},{default:t(()=>[l(y)]),_:1})]),_:1},8,["file-list","action","data"]),l(j,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=n=>m.value=n)},{default:t(()=>[r("img",{"w-full":"",src:_.value,alt:"Preview Image"},null,8,T)]),_:1},8,["modelValue"])]),_:1}),Z,z,D,l(d,{label:"简介"},{default:t(()=>[l(c,{rows:"10",modelValue:o.desc,"onUpdate:modelValue":e[5]||(e[5]=n=>o.desc=n),type:"textarea"},null,8,["modelValue"])]),_:1}),l(d,null,{default:t(()=>[l(C,{type:"primary",onClick:P},{default:t(()=>[J("保存")]),_:1})]),_:1})]),_:1},8,["model"])}}});export{$ as default};
