import{c as D,e as v,f as U,h as w}from"./api-BNukjHMq.js";import{m as A,a as O,d as _,ah as m,p as k,q as I,U as e,O as r,S as p}from"./vue-DRvwLzXx.js";import{_ as M}from"./index-aVDWSHrQ.js";import"./base-BDaasHXh.js";import"./index-kI_rcZ0B.js";import"./crypto-BjADBdty.js";document.title="鲸币订单";const q=A({name:"OrderPage",setup(){const l=O([]),d=O(!1),b=O(!1),i=O({id:0,user_id:0,itemid:0,quantity:0,order_type:"",status:"",toal_price:0,address:"",phone:"",audit_id:0,create_time:new Date}),f=O({id:0,user_id:0,itemid:0,quantity:0,order_type:"",status:"",toal_price:0,address:"",phone:"",audit_id:0,create_time:new Date}),V=async()=>{try{const o=await D();l.value=o.data}catch(o){console.error("获取 Order 列表失败:",o)}},s=()=>{d.value=!0},n=async()=>{try{(await v({quantity:i.value.quantity,itemid:i.value.itemid,address:i.value.address,phone:i.value.phone,status:i.value.status,order_type:i.value.order_type,toal_price:i.value.toal_price,user_id:i.value.user_id})).status===200?(d.value=!1,V()):console.error("添加 Order 失败")}catch(o){console.error("添加 Order 失败:",o)}},y=async o=>{try{const t=await U({orderid:o.id});f.value=t.data,b.value=!0}catch(t){console.error("获取 Order 详情失败:",t)}},u=async o=>{try{(await w({orderid:o})).status===200?V():console.error("删除 Order 失败")}catch(t){console.error("删除 Order 失败:",t)}};return _(()=>{V()}),{orderList:l,addOrderModalVisible:d,detailModalVisible:b,addOrderForm:i,detailOrder:f,showAddOrderModal:s,submitAddOrder:n,showDetailModal:y,deleteOrder:u}}});function E(l,d,b,i,f,V){const s=m("el-button"),n=m("el-table-column"),y=m("el-table"),u=m("el-input"),o=m("el-form-item"),t=m("el-input-number"),F=m("el-form"),B=m("el-dialog");return k(),I("div",null,[e(s,{onClick:l.showAddOrderModal},{default:r(()=>[p("添加")]),_:1},8,["onClick"]),e(y,{data:l.orderList,border:"",style:{width:"100%"}},{default:r(()=>[e(n,{prop:"id",label:"ID"}),e(n,{prop:"user_id",label:"用户 ID"}),e(n,{prop:"itemid",label:"商品 ID"}),e(n,{prop:"quantity",label:"数量"}),e(n,{prop:"order_type",label:"订单类型"}),e(n,{prop:"status",label:"状态"}),e(n,{prop:"toal_price",label:"总价"}),e(n,null,{default:r(a=>[e(s,{onClick:C=>l.showDetailModal(a.row),size:"small"},{default:r(()=>[p("详情")]),_:2},1032,["onClick"]),e(s,{onClick:C=>l.deleteOrder(a.row.id),size:"small"},{default:r(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(B,{modelValue:l.addOrderModalVisible,"onUpdate:modelValue":d[9]||(d[9]=a=>l.addOrderModalVisible=a),title:"添加 Order"},{default:r(()=>[e(F,{model:l.addOrderForm,"label-width":"80px"},{default:r(()=>[e(o,{label:"用户 ID"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.user_id,"onUpdate:modelValue":d[0]||(d[0]=a=>l.addOrderForm.user_id=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"商品 ID"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.itemid,"onUpdate:modelValue":d[1]||(d[1]=a=>l.addOrderForm.itemid=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"数量"},{default:r(()=>[e(t,{modelValue:l.addOrderForm.quantity,"onUpdate:modelValue":d[2]||(d[2]=a=>l.addOrderForm.quantity=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"订单类型"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.order_type,"onUpdate:modelValue":d[3]||(d[3]=a=>l.addOrderForm.order_type=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"状态"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.status,"onUpdate:modelValue":d[4]||(d[4]=a=>l.addOrderForm.status=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"总价"},{default:r(()=>[e(t,{modelValue:l.addOrderForm.toal_price,"onUpdate:modelValue":d[5]||(d[5]=a=>l.addOrderForm.toal_price=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"地址"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.address,"onUpdate:modelValue":d[6]||(d[6]=a=>l.addOrderForm.address=a)},null,8,["modelValue"])]),_:1}),e(o,{label:"电话"},{default:r(()=>[e(u,{modelValue:l.addOrderForm.phone,"onUpdate:modelValue":d[7]||(d[7]=a=>l.addOrderForm.phone=a)},null,8,["modelValue"])]),_:1}),e(o,null,{default:r(()=>[e(s,{type:"primary",onClick:l.submitAddOrder},{default:r(()=>[p("提交")]),_:1},8,["onClick"]),e(s,{onClick:d[8]||(d[8]=a=>l.addOrderModalVisible=!1)},{default:r(()=>[p("取消")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(B,{visible:l.detailModalVisible,title:"Order 详情"},{default:r(()=>[e(F,{model:l.detailOrder,"label-width":"80px"},{default:r(()=>[e(o,{label:"用户 ID"},{default:r(()=>[e(u,{modelValue:l.detailOrder.user_id,"onUpdate:modelValue":d[10]||(d[10]=a=>l.detailOrder.user_id=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"商品 ID"},{default:r(()=>[e(u,{modelValue:l.detailOrder.itemid,"onUpdate:modelValue":d[11]||(d[11]=a=>l.detailOrder.itemid=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"数量"},{default:r(()=>[e(t,{modelValue:l.detailOrder.quantity,"onUpdate:modelValue":d[12]||(d[12]=a=>l.detailOrder.quantity=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"订单类型"},{default:r(()=>[e(u,{modelValue:l.detailOrder.order_type,"onUpdate:modelValue":d[13]||(d[13]=a=>l.detailOrder.order_type=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"状态"},{default:r(()=>[e(u,{modelValue:l.detailOrder.status,"onUpdate:modelValue":d[14]||(d[14]=a=>l.detailOrder.status=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"总价"},{default:r(()=>[e(t,{modelValue:l.detailOrder.toal_price,"onUpdate:modelValue":d[15]||(d[15]=a=>l.detailOrder.toal_price=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"地址"},{default:r(()=>[e(u,{modelValue:l.detailOrder.address,"onUpdate:modelValue":d[16]||(d[16]=a=>l.detailOrder.address=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"电话"},{default:r(()=>[e(u,{modelValue:l.detailOrder.phone,"onUpdate:modelValue":d[17]||(d[17]=a=>l.detailOrder.phone=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"创建时间"},{default:r(()=>[e(u,{modelValue:l.detailOrder.create_time,"onUpdate:modelValue":d[18]||(d[18]=a=>l.detailOrder.create_time=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,{label:"审核 ID"},{default:r(()=>[e(u,{modelValue:l.detailOrder.audit_id,"onUpdate:modelValue":d[19]||(d[19]=a=>l.detailOrder.audit_id=a),disabled:""},null,8,["modelValue"])]),_:1}),e(o,null,{default:r(()=>[e(s,{onClick:d[20]||(d[20]=a=>l.detailModalVisible=!1)},{default:r(()=>[p("关闭")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}const S=M(q,[["render",E]]);export{S as default};
