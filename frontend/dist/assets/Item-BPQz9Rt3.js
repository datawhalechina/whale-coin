import{g as U,a as D,b as E,d as M}from"./api-BNukjHMq.js";import{m as y,a as s,d as A,ah as p,p as B,q as $,U as e,O as t,S as V,t as P}from"./vue-DRvwLzXx.js";import{_ as L}from"./index-W_Xfc79R.js";import"./base-BDaasHXh.js";import"./index-kI_rcZ0B.js";import"./crypto-BjADBdty.js";document.title="鲸币商品";const N=y({name:"ItemPage",setup(){const l=s([]),o=s([]),C=s([]),f=s(!1),k=s(!1),v=s(""),n=s(!1),i=s({id:0,name:"",describe:"",stock:0,prince:0,img_path:""}),F=s({id:0,name:"",describe:"",stock:0,prince:0,img_path:""}),m=async()=>{try{const d=await U();C.value=d.data}catch(d){console.error("获取 Item 列表失败:",d)}},u=d=>{o.value=o.value.filter(r=>r.name!=d.name),console.log(o)},I=d=>{console.log(d),v.value=d.url,n.value=!0},g=()=>{f.value=!0},b=d=>{console.log(d,o.value)},a=async()=>{try{(await D({name:"name",describe:"describe",stock:0,prince:0})).status===200?(f.value=!1,m()):console.error("添加 Item 失败")}catch(d){console.error("添加 Item 失败:",d)}},w=async d=>{try{const r=await E({itemid:d.id});F.value=r.data,k.value=!0}catch(r){console.error("获取 Item 详情失败:",r)}};let c=async d=>{try{(await M({itemid:d})).status===200?m():console.error("删除 Item 失败")}catch(r){console.error("删除 Item 失败:",r)}};return A(()=>{m()}),{itemList:C,addItemModalVisible:f,detailModalVisible:k,addItemForm:i,detailItem:F,fileList:l,dialogImageUrl:v,dialogImgVisible:n,showAddItemModal:g,submitAddItem:a,showDetailModal:w,deleteItem:c,handlePictureCardPreview:I,addFile:b,handleRemove:u}}}),z=["src"];function q(l,o,C,f,k,v){const n=p("el-button"),i=p("el-table-column"),F=p("el-table"),m=p("el-input"),u=p("el-form-item"),I=p("el-input-number"),g=p("el-form"),b=p("el-dialog");return B(),$("div",null,[e(n,{onClick:l.showAddItemModal},{default:t(()=>[V("添加")]),_:1},8,["onClick"]),e(F,{data:l.itemList,border:"",style:{width:"100%"}},{default:t(()=>[e(i,{prop:"id",label:"ID"}),e(i,{prop:"name",label:"名称"}),e(i,{prop:"describe",label:"描述"}),e(i,{prop:"stock",label:"库存"}),e(i,{prop:"prince",label:"价格"}),e(i,null,{default:t(a=>[e(n,{onClick:w=>l.showDetailModal(a.row),size:"small"},{default:t(()=>[V("详情")]),_:2},1032,["onClick"]),e(n,{onClick:w=>l.deleteItem(a.row.id),size:"small"},{default:t(()=>[V("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(b,{modelValue:l.addItemModalVisible,"onUpdate:modelValue":o[6]||(o[6]=a=>l.addItemModalVisible=a),title:"添加商品"},{default:t(()=>[e(g,{modelValue:l.addItemForm,"onUpdate:modelValue":o[5]||(o[5]=a=>l.addItemForm=a),"label-width":"80px"},{default:t(()=>[e(u,{label:"名称"},{default:t(()=>[e(m,{modelValue:l.addItemForm.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.addItemForm.name=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"描述"},{default:t(()=>[e(m,{modelValue:l.addItemForm.describe,"onUpdate:modelValue":o[1]||(o[1]=a=>l.addItemForm.describe=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"库存"},{default:t(()=>[e(I,{modelValue:l.addItemForm.stock,"onUpdate:modelValue":o[2]||(o[2]=a=>l.addItemForm.stock=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"价格"},{default:t(()=>[e(I,{modelValue:l.addItemForm.prince,"onUpdate:modelValue":o[3]||(o[3]=a=>l.addItemForm.prince=a)},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(n,{type:"primary",onClick:l.submitAddItem},{default:t(()=>[V("提交")]),_:1},8,["onClick"]),e(n,{onClick:o[4]||(o[4]=a=>l.addItemModalVisible=!1)},{default:t(()=>[V("取消")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),e(b,{modelValue:l.dialogImgVisible,"onUpdate:modelValue":o[7]||(o[7]=a=>l.dialogImgVisible=a),class:"image-dialog"},{default:t(()=>[P("img",{style:{width:"100%",height:"100%"},"w-full":"",src:l.dialogImageUrl,alt:"Preview Image"},null,8,z)]),_:1},8,["modelValue"]),e(b,{modelValue:l.detailModalVisible,"onUpdate:modelValue":o[15]||(o[15]=a=>l.detailModalVisible=a),title:"商品详情"},{default:t(()=>[e(g,{model:l.detailItem,"label-width":"80px"},{default:t(()=>[e(u,{label:"名称"},{default:t(()=>[e(m,{modelValue:l.detailItem.name,"onUpdate:modelValue":o[8]||(o[8]=a=>l.detailItem.name=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"描述"},{default:t(()=>[e(m,{modelValue:l.detailItem.describe,"onUpdate:modelValue":o[9]||(o[9]=a=>l.detailItem.describe=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"库存"},{default:t(()=>[e(I,{modelValue:l.detailItem.stock,"onUpdate:modelValue":o[10]||(o[10]=a=>l.detailItem.stock=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"价格"},{default:t(()=>[e(I,{modelValue:l.detailItem.prince,"onUpdate:modelValue":o[11]||(o[11]=a=>l.detailItem.prince=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"创建时间"},{default:t(()=>[e(m,{modelValue:l.detailItem.create_time,"onUpdate:modelValue":o[12]||(o[12]=a=>l.detailItem.create_time=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,{label:"创建用户"},{default:t(()=>[e(m,{modelValue:l.detailItem.create_user,"onUpdate:modelValue":o[13]||(o[13]=a=>l.detailItem.create_user=a),disabled:""},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(n,{onClick:o[14]||(o[14]=a=>l.detailModalVisible=!1)},{default:t(()=>[V("关闭")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const H=L(N,[["render",q]]);export{H as default};
